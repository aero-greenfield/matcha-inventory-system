{% extends "base.html" %}

{% block title %}Low Stock{% endblock %}

{% block extra_styles %}
<style>
.data-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
.data-table th, .data-table td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
.data-table th { background: #dc3545; color: white; }
.data-table tr:hover { background: #fff3cd; }
.export-btn { display: inline-block; background: #97bc62; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; margin: 10px 0; }
.export-btn:hover { background: #7da34f; }
</style>
{% endblock %}

{% block content %}
<h1>‚ö†Ô∏è Low Stock Alerts</h1>

{% if materials %}
<p style="color:red;font-size:18px;">‚ö†Ô∏è {{ count }} material(s) need reordering:</p>
<a href="/export/low-stock-excel" class="export-btn">üì• Export to Excel</a>
<table class="data-table">
    <thead>
        <tr>
            <th>Name</th><th>Category</th><th>Stock Level</th>
            <th>Unit</th><th>Reorder Level</th><th>Cost Per Unit</th><th>Supplier</th>
        </tr>
    </thead>
    <tbody>
        {% for row in materials %}
        <tr>
            <td>{{ row.name }}</td>
            <td>{{ row.category }}</td>
            <td>{{ row.stock_level }}</td>
            <td>{{ row.unit }}</td>
            <td>{{ row.reorder_level }}</td>
            <td>{{ row.cost_per_unit }}</td>
            <td>{{ row.supplier }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p style="color:green;font-size:18px;">‚úÖ All materials are adequately stocked!</p>
{% endif %}
{% endblock %}
