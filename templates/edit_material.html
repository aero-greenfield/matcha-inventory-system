{% extends "base.html" %}

{% block title %}Edit {{ name }}{% endblock %}

{% block extra_styles %}
<style>
.section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 5px solid #97bc62; }
.section h2 { color: #2c5f2d; margin-top: 0; }
.form-group { margin-bottom: 15px; }
label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
input[type=text], input[type=number] { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
.btn { padding: 10px 24px; border: none; border-radius: 5px; cursor: pointer; font-size: 15px; }
.btn-green { background: #97bc62; color: white; } .btn-green:hover { background: #7da34f; }
.btn-red { background: #dc3545; color: white; } .btn-red:hover { background: #c82333; }
.radio-group { display: flex; gap: 20px; margin: 10px 0; }
.delete-section { border-left: 5px solid #dc3545; }
</style>
{% endblock %}

{% block content %}
<h1>‚úèÔ∏è Edit: {{ name }}</h1>

{% if msg %}<p style="color:green;font-weight:bold;">{{ msg }}</p>{% endif %}
{% if err %}<p style="color:#dc3545;font-weight:bold;">{{ err }}</p>{% endif %}

<div class="section">
    <h2>üì¶ Adjust Stock</h2>
    <p>Current stock: <strong>{{ stock_level }} {{ unit or '' }}</strong></p>
    <form method="POST" action="/edit-material/{{ mat_id }}/adjust-stock">
        <div class="form-group">
            <label>Amount</label>
            <input type="number" step="0.01" name="amount" min="0.01" required placeholder="e.g. 50">
        </div>
        <div class="radio-group">
            <label><input type="radio" name="action" value="increase" checked> Increase</label>
            <label><input type="radio" name="action" value="decrease"> Decrease</label>
        </div>
        <button type="submit" class="btn btn-green">Update Stock</button>
    </form>
</div>

<div class="section">
    <h2>üìù Edit Details</h2>
    <form method="POST" action="/edit-material/{{ mat_id }}/update-details">
        <div class="form-group"><label>Name</label><input type="text" name="name" value="{{ name }}" required></div>
        <div class="form-group"><label>Category</label><input type="text" name="category" value="{{ category or '' }}"></div>
        <div class="form-group"><label>Unit</label><input type="text" name="unit" value="{{ unit or '' }}"></div>
        <div class="form-group"><label>Reorder Level</label><input type="number" step="0.01" name="reorder_level" value="{{ reorder_level or '' }}"></div>
        <div class="form-group"><label>Cost per Unit</label><input type="number" step="0.01" name="cost_per_unit" value="{{ cost_per_unit or '' }}"></div>
        <div class="form-group"><label>Supplier</label><input type="text" name="supplier" value="{{ supplier or '' }}"></div>
        <button type="submit" class="btn btn-green">Save Changes</button>
    </form>
</div>

<div class="section delete-section">
    <h2>üóëÔ∏è Delete Material</h2>
    <p style="color:#666;">Permanently removes <strong>{{ name }}</strong> from inventory.</p>
    <form method="POST" action="/edit-material/{{ mat_id }}/delete"
          onsubmit="return confirm('Delete {{ name }}? This cannot be undone.')">
        <button type="submit" class="btn btn-red">Delete Material</button>
    </form>
</div>
{% endblock %}
